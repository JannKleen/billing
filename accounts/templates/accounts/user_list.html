{% extends 'accounts/dashboard.html' %}

{% block title %}{{ user.subscriber.group.name }} Users{% endblock %}

{% block links %}
<li><a href="{% url 'accounts:dashboard' %}">Dashboard</a></li>
<!-- <li class="active"><a href="{% url 'accounts:users' %}">Users <span class="sr-only">(current)</span></a></li> -->
<li class="active dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
    Users <span class="sr-only">(current)</span>
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu">
    <li>
      <a href="{% url 'accounts:users' %}">
        <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
        View Users
      </a>
    </li>
    <li>
      <a href="{% url 'accounts:add_user' %}">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
        Add User
      </a>
    </li>
    <li>
      <a href="{% url 'accounts:upload_user_list' %}">
        <span class="glyphicon glyphicon-upload" aria-hidden="true"></span>
        Upload User List
      </a>
    </li>
  </ul>
</li>
{% endblock %}

{% block app_body %}
{% if users %}
<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">ID</th>
      <th scope="col">User Name</th>
      <th scope="col">First Name</th>
      <th scope="col">Last Name</th>
      <th scope="col">Date Created</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
    </tr>
      <td>{{ user.pk }}</td>
      <td><a href="{% url 'accounts:edit_user' pk=user.pk %}">{{ user.username }}</a></td>
      <td>{{ user.first_name }}</td>
      <td>{{ user.last_name }}</td>
      <td>{{ user.date_joined }}</td>
      <td>
        <form action="{% url 'accounts:toggle_status' pk=user.pk %}" method="post">
          {% csrf_token %}
          {% if user.is_active %}
            <button type="submit" class="btn btn-xs btn-danger">Deactivate</button>
          {% else %}
            <button type="submit" class="btn btn-xs btn-primary">Activate</button>
          {% endif %}
        </form>
      </td>
    {% endfor %}
  </tbody>
</table>
{% else %}
<div class="row">
  <div class="col-sm-12 main">
    <p class="well">
      There are no users in this group.
      <a href="{% url 'accounts:add_user' %}">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
        Add User
      </a>
      <a href="{% url 'accounts:upload_user_list' %}">
        <span class="glyphicon glyphicon-upload" aria-hidden="true"></span>
        Upload User List
      </a>
    </p>
  </div>
</div>
{% endif %}

<nav>
  <ul class="pager">
  {% if users.has_previous %}
    <li class="previous"><a href="?page={{ users.previous_page_number }}"><span aria-hidden="true">&larr;</span> Previous</a></li>
  {% endif %}
  {% if users.has_next %}
    <li class="next"><a href="?page={{ users.next_page_number }}">Next <span aria-hidden="true">&rarr;</span></a></li>
  {% endif %}
  </ul>
</nav>
{% endblock %}
